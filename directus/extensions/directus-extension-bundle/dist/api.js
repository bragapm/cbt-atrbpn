import e from"crypto";function o(){return e.randomBytes(16)}for(var t=[],r=0;r<256;++r)t[r]=(r+256).toString(16).substr(1);function a(e,r,a){var n=r&&a||0;"string"==typeof e&&(r="binary"===e?new Array(16):null,e=null);var s=(e=e||{}).random||(e.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,r)for(var c=0;c<16;++c)r[n+c]=s[c];return r||function(e,o){var r=o||0,a=t;return[a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],"-",a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]],a[e[r++]]].join("")}(s)}const n=[],s=[{name:"hello",config:e=>{e.get("/",((e,o)=>o.send("Hello, World!")))}},{name:"coupon",config:(e,{services:o,exceptions:t,getSchema:r})=>{const{UsersService:n,ItemsService:s,AuthenticationService:c}=o;e.post("/register",(async(e,o,t)=>{try{const{coupon_code:t}=e.body,i=`user_${a()}@example.com`,l="CBTATRBPN2024",u=new n({schema:await r()}),g=await u.createOne({email:i,password:l,status:"active"}),w=new s("coupon",{schema:await r()}),m=new Date,d=(await w.createOne({code:t,user_id:g,status:"Published",created_at:m,updated_at:m,last_login_at:m}),new c({accountability:null,schema:await r()}));console.log({authService:d});const p=await d.login({email:i,password:l});console.log("www"),o.json({email:i,password:l,last_login_at:g.last_login_at,access_token:p.access_token,refresh_token:p.refresh_token})}catch(e){console.error("Error creating user or coupon:",e),t(new Error(`Error creating user or coupon: ${e.message}`))}})),e.get("/",(async(e,o)=>o.json({status:"success",data:"Hello"})))}}],c=[];export{s as endpoints,n as hooks,c as operations};
